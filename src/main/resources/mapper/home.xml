<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="site.metacoding.testproject.domain.home.HomeDao">

	<insert id="insert">
		INSERT INTO home(home_name, home_tel, home_location) VALUES(#{userName}, #{homeTel}, #{homeLocation});
	</insert>

	<select id="findAll" resultType="site.metacoding.testproject.domain.home.Home">
		SELECT * FROM home;
	</select>

	<select id="findById" resultType="site.metacoding.testproject.domain.home.Home">
		SELECT * FROM home WHERE home_id = #{homeId}
	</select>

	<update id="update"></update>

	<delete id="deleteById"></delete>

	<select id="findByDetail" resultType="site.metacoding.testproject.web.dto.response.home.DetailDto">
		SELECT
		h.*,
		(SELECT sub_id FROM sub WHERE user_id = #{principalId} AND home_id = #{homeId}) sub_id,
		(SELECT 1 FROM sub WHERE user_id = #{principalId} AND home_id = #{homeId}) issubed
		FROM home h
		WHERE h.home_id = #{homeId};
	</select>


</mapper>